<div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
<div *ngIf="successMessage" class="success">{{ successMessage }}</div>

<h2>Manage Questions</h2>

<!-- إضافة سؤال جديد -->
<form #form="ngForm" (ngSubmit)="addQuestion(form)">
  <label for="text">Question Text:</label>
  <input
    type="text"
    id="text"
    name="text"
    [(ngModel)]="newQuestion.text"
    required
    placeholder="Enter question text"
  />

  <div *ngFor="let option of newQuestion.options; let optionIndex = index">
    <label for="option{{ optionIndex + 1 }}">Option {{ optionIndex + 1 }}:</label>
    <input
      type="text"
      id="option{{ optionIndex + 1 }}"
      name="option{{ optionIndex + 1 }}"
      [(ngModel)]="option.text"
      required
      placeholder="Enter option text"
    />

    <label for="isCorrect{{ optionIndex }}">Is Correct:</label>
    <input
      type="checkbox"
      id="isCorrect{{ optionIndex }}"
      name="isCorrect{{ optionIndex }}"
      [(ngModel)]="option.isCorrect"
    />
  </div>

  <button type="button" (click)="addOption()">Add Option</button>
  <button type="submit" [disabled]="!form.valid">Add Question</button>
</form>


<h3>Current Questions</h3>
<div *ngFor="let question of questions">
  <p>{{ question.text }}</p>
  <div *ngFor="let option of question.options">
    <p>{{ option.text }} (Correct: {{ option.isCorrect ? 'Yes' : 'No' }})</p>
  </div>

  <button (click)="updateQuestion(question._id)">Update</button>
  <button (click)="deleteQuestion(question._id)">Delete</button>
</div>
